所建模型如下图所示：
![模型.PNG](https://i.loli.net/2019/05/02/5cc9d91323293.png)
1.（1）纯比例控制（P）
将理想电压源替换为理想电流源后，如果采用纯比例控制，则Kp的值对系统性能影响如下：
Kp越大，电机电流瞬时最大值越大，但过渡过程时间越短，加上阶跃负载后的反向电流稳定值越大，但是影响几乎可以忽略。 
Kp越大，电机转速的过渡过程时间越短（即电机响应变快），电机在加上阶跃负载后的稳定转速越接近1000rpm（经仿真，当Kp=2000左右时电机的稳定转速才能恢复至1000rpm）。
下面两图分别是Kp=2、Kp=4时的图像（在第7s时加上阶跃负载）：
![kp=2.PNG](https://i.loli.net/2019/05/02/5cc9d70215942.png)
![kp=4.PNG](https://i.loli.net/2019/05/02/5cc9d7add5643.png)
两图的简要说明：
当Kp=2时，电机在1.005s、3s、10s时的电流分别是1978A、46.93A、-800.3A，在2s、10s时的转速分别是859.7rpm、1400rpm；
当Kp=4时，电机在1.005s、3s、10s时的电流分别是3928A、11.37A、-804.3A，在2s、10s时的转速分别是979rpm、1201rpm；
该说明与前述Kp对电机的性能影响相符。
该阶跃响应曲线与仿真2的差别：在未加负载时，前者的电机转速不会超调，而是逐渐增大至1000rpm，增速逐渐放缓，电机的电流有冲击，但是很快就会降低至很小的值；后者的电机转速会出现超调，电流值不会有冲击，且电机转速和电机电流值呈现波浪形状。
（2）比例积分控制（PI）
经测试，Kp、Ki的值对系统响应的影响如下：
在Kp一定时，Ki越大电流的瞬时冲击越小、回复时间越短甚至出现负值，加上负载后的电流稳定值越小；电机转速的超调量越大但是稳定至1000rpm的时间越短，加上负载后转速的过渡过程时间越短。
在Ki一定时，Kp的值越大，电流冲击越大，回复速度越快，加上负载后的电流稳定值越小但是影响不大；电机转速的超调越小，过渡过程时间越短，加上负载后的稳定转速越小（影响很小）。
下面四图分别是Kp=1、2和Ki=1、2时的仿真结果：
Kp=1Ki=1：![11.PNG](https://i.loli.net/2019/05/02/5cc9ddce9cafc.png)
Kp=1Ki=2：![12.PNG](https://i.loli.net/2019/05/02/5cc9de0b6274d.png)
Kp=2Ki=1：![21.PNG](https://i.loli.net/2019/05/02/5cc9de25dadd5.png)
Kp=2Ki=2：![22.PNG](https://i.loli.net/2019/05/02/5cc9de3d0f231.png)
其与仿真作业2的区别：
本次仿真结果中虽然电流也出现了冲击，转速也出现了超调，但是相对仿真作业2的仿真结果而言，冲击和超调量均更小，二者波动的更加平缓，对系统的负面影响更小。

2. 用电压源+PI控制器构造更接近真实的电流环，代替理想可调电流源：
经反复测试，电流环的Kp、Ki对系统影响如下：
当其他参数固定不变时，电流环的Kp越大，电机电流的冲击越大（影响较为明显），电流稳定时间越长，加上负载后的反向冲击电流越小（影响不大）；电机转速超调越大，波动越严重，过渡过程时间越长。
当其他参数固定不变时，电流环的Ki越大，电机电流的冲击越大（影响不大），电流稳定时间越长（影响不大），电流波动频率越高（影响明显），加上负载后的反向冲击电流几乎不变。电机转速超调越大，波动越严重，过渡过程时间越长且影响明显。
下面三图分别是Kp=1和Ki=1、Kp=1和Ki=3、Kp=3和Ki=1（速度环Kp=1、Ki=2）时的仿真结果（在第5s加上负载）：
![（2）11.PNG](https://i.loli.net/2019/05/02/5cca57218b0d3.png)
![（2）13.PNG](https://i.loli.net/2019/05/02/5cca573285ab5.png)
![（2）31.PNG](https://i.loli.net/2019/05/02/5cca5741c219a.png)
  经调试后，得到较为理想的曲线时的参数分别为：速度环Kp=1、Ki=2；电流环Kp=0.2、Ki=2。
与单闭环阶跃响应曲线、理想电流源的阶跃响应曲线相比，其电机电流、转速曲线在突然加上负载时波动较小，但是电机启动时的冲击电流较为明显，电机转速的过渡过程时间和电流的稳定时间有所延长。
