# 1、单闭环调速系统模型搭建   
如图所示建立单闭环反馈调速系统：  
![](https://i.imgur.com/Vb51xIz.jpg)
其中采用比例积分进行反馈调速。
# 2、单闭环调速系统算法仿真 #
## 1）采用纯比例P控制，改变比例增益，使得速度阶跃响应超调量为5%和20%，并记录对应比例增益值Kp1和Kp2。 ##
### 1.调节增益值 ###
通过不断调节确定超调量为20%和5%时的增益值分别为0.764和0.003
其中0.003无法到达最小值5%，仅仅只为8.94%  
计算超调量脚本如下：
``` 
    %计算超调量
    y = temp_motn.values*9.55;
    x = temp_mott.time;
    ymax = max(y);
    l = length(x);
    ysta = mean(y(1000:2000));
    m = ymax/ysta-1;
    m
```
得到KP1 = 0.0003时超调量**m1 = 0.089449237140707**  
   KP2 =0.764时超调量**m2 = 0.200088271305227**  
## 2）根据波形，记录比例增益分别为Kp1和Kp2时，电机在空载和额定负载转矩条件下的速度静态误差。 ##
计算电机静态误差脚本如下：
```
    %计算静态误差
    e = 1-ysta/1000;
    e
```
### 空载时 ###
计算可得 kp1 = 0.0003时，静态误差**e1 = 0.999700406367285**  
   kp2 = 0.764时，静态误差**e2 = 0.567137026310621**  
图片如下：  
![](https://i.imgur.com/kQn2ViX.jpg)  
                                 KP1 = 0.0003  
![](https://i.imgur.com/3VpCjCK.jpg)  
KP2 = 0.764
### 额定负载时 ###
计算可得 kp1 = 0.0003时，静态误差**e1=1.0425716746439500**  
kp2 = 0.764时，静态误差**e2 = 0.591459565186847**  
由e1大于一可知当kp1 = 0.0003时，其无法带动负载运动。  
各图如下：  
![](https://i.imgur.com/JYIgbE0.jpg)  
KP1 = 0.0003  
![](https://i.imgur.com/oJRsNHF.jpg)  
KP1 = 0.0003  
## 3）采用比例积分PI控制，选择合适的比例增益和积分增益，得到较为理想的阶跃响应曲线，记录比例增益Kp和积分增益Ki，并根据阶跃响应曲线记录超调量和过渡过程时间。观察电机从空载到加额定负载转矩时速度的变化过程。 ##
计算过渡时间脚本如下：
```
    %计算过渡时间
    ts = x(max(find(y<0.95*ysta)));
    ts
```  
通过调节得到：定**kp = 0.001 ki = 3.1**时可以达到理论效果，效果图如下：  
![](https://i.imgur.com/QfR1m3t.jpg)   
经计算可知，其过渡时间为ts = 0.558043772880952 超调量和静态误差均可忽略不计。
